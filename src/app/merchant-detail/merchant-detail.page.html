<ion-content [fullscreen]="true">
  <div
    class="closeBtn mt-5 ms-2 d-flex justify-content-center"
    (click)="backButton()"
  >
    <ion-icon
      name="chevron-back-outline"
      class="align-self-center text-light p-0 m-0 icon-custom"
    ></ion-icon>
  </div>
    <div class="row customRow w-100 mt-lg-3 p-0 m-0">
      <div class="col-xs-12 col-lg-6">
        <div class="wrapper d-flex justify-content-center">
          <img [src]="merchantData['imageUrl']" alt="" class="rounded-bottom merchantImgCustom align-self-center w-100" />
        </div>
      </div>
      <div class="col-xs-12 col-lg-6">
        <div class="container mb-4">
          <h3 class="mt-3">{{merchantData['merchantName']}}</h3>
          <p>{{merchantData['addressLine1']}}, {{merchantData['addressLine2']}}, {{merchantData['addressLine3']}}</p>
          <p>{{merchantData['merchantDesc']}}</p>
          <div class="row p-0 m-0">
            <div class="col-8 p-0 m-0 d-flex">
              <h3 class="align-self-center p-0 m-0">Reviews</h3>
            </div>
            <div class="col-4 p-0 m-0 d-flex justify-content-center">
              <p class="align-self-center m-0 p-0">{{avgRating}}</p>
              <ion-icon
                name="star"
                class="align-self-center text-light p-0 m-0 ms-2 icon-custom2"
                color="warning"
              ></ion-icon>
            </div>
          </div>
          <div class="review-wrapper w-100 mt-1 mb-3">
            <div class="card mt-2" *ngFor="let review of reviewData">
              <div class="card-content">
                <div class="row m-0 p-0">
                  <div class="col-3 p-0">
                    <img
                      [src]="review['imageUrl']"
                      alt=""
                      class="rounded-start img-fluid"
                    />
                  </div>
                  <div class="col-9 p-0">
                    <div
                      class="content-wrap w-100 h-100 ps-1 pe-1"
                      style="position: relative !important"
                    >
                      <p class="review-text m-0 mb-4">{{review['feedback']}}</p>
                      <p
                        class="rating-text m-0 mt-1"
                        style="position: absolute; bottom: 0"
                      >
                        Rating: {{review['rating']}}/5
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <button class="btn btn-primary w-100 shadow" (click)="isModalOpen=true">Leave A Review</button>
        </div>
      </div>
    </div>
  
  
  
  <ion-modal [isOpen]="isModalOpen">
    <ng-template>
      <ion-content>
        <div class="w-100 h-100 d-flex justify-content-center">
          <div class="w-100 ps-4 pe-4 mt-3 align-self-center">
            <div class="review-form-wrapper">
              <h4 class="text-center p-0 m-0">{{merchantData['merchantName']}}</h4>
              <h1 class="text-center">
                Leave us a feedback!
              </h1>
              <p class="mt-3">Upload a photo with your review!</p>
              <input
                (change)="fileSelected($event)"
                type="file"
                class="form-control"
              />
              <p class="mt-3">How would you rate our services? (0-5)</p>
              <input
                [(ngModel)]="formRating"
                type="range"
                class="form-range"
                min="0"
                max="5"
                step="0.5"
              />
              <p class="p-0 m-0 text-end">{{formRating}}/5</p>
              <p class="mt-3">Tell us how you feel about our services?</p>
              <textarea
                [(ngModel)]="formFeedback"
                type="text"
                class="form-control w-100 mt-1"
              ></textarea>
              <button class="btn btn-primary w-100 mt-3" (click)="submit()">
                Submit
              </button>
              <p class="text-center small mt-2 text-primary" (click)="isModalOpen=false">Changed your mind? Go Back</p>
            </div>
          </div>
        </div>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>
